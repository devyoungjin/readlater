# 1장 - 협력하는 객체들의 공동체

객체지향이란, 서로 연관된 객체끼리 서로 협력하는 것이 주요 컨셉이라고 할 수 있다. 

그리고 객체간 협력에서 중요한 개념은 역할과 책임이다.

책에서는 협력과 협력관계에서의 역할과 책임을 설명하기 위해 커피숍에서 커피를 주문하는 경우를 예시로 들었다.

1. 손님이 캐시어에게 주문을 한다.
2. 주문을 받은 캐시어는 바리스타에게 커피 제조를 주문한다.
3. 캐시어에게 커피 제조를 주문받은 바리스타는 커피를 제조한다.
4. 제조가 완료되면 캐시어에게 커피를 전달한다.
5. 캐시어는 완성된 커피를 손님에게 전달한다.

<br>

## 객체의 역할과 책임

여기서 손님, 캐시어, 바리스타는 객체에 해당한다. 
그리고 **손님**은 **커피 주문하기**, **캐시어**는 **커피 제조 주문하기**, **바리스타**는 **커피 제조하기**가 각각 이들의 역할이다. 역할은 곧 동시에 책임이기도 하다.

책에서는 역할에 대해 **<대체 가능, Sustainable>**이라는 특징으로 설명을 더했다. 역할만 수행한다면 누가 수행하는 상관없기 때문이다. 다르게 이야기하면, 수행하는 역할을 통해 객체를 구분할 수 있다고 생각한다.



손님은 카페에 방문했다면, 주문을 반드시 해야한다. 그래야 커피를 전달받을 수 있다. **캐시어는 주문을 받았다면, 반드시 커피 제조를 주문해야 한다.** 그래야 커피를 손님에게 전달할 수 있다. **바리스타는 커피 제조 주문을 받았다면, 반드시 커피를 제조해야 한다.** 그래야 캐시어에게 커피를 전달 할 수 있다. 이것이 각각의 객체가 갖는 책임이다.



그러나 이 책임은 자율성을 동반한다. 손님이 카페에 방문해서 주문을 해야하지만, 어떤 방식으로 주문을 하든 그건 손님의 자유다. 마찬가지로 캐시어가 손님으로부터 주문을 받았다면, 커피 제조 주문을 바리스타에게 하는 방식은 캐시어의 자유이다. 바리스타 역시 어떤 방식으로 커피를 제조하든 그저 완성된 커피만 캐시어에게 전달하면된다. 이 예는 **객체가 책임을 수행하면서 동시에 책임을 수행하는 로직은 자율적으로 정할 수 있다는 특징**을 설명한다. 



객체지향적인 설계를 하기위해서는 각 객체 협력이 충분히 협력적이어야 하는데, 충분히 협력적인 관계를 만들어내기 위해서는 **각 객체간 역할과 책임을 분명히** 해야한다. 캐시어가 주문을 받고 직접 제조를 할 수도 있겠지만, 하나의 객체가 다양한 역할을 수행할수록 하나의 객체가 부담해야할 책임이 커지고, 그에따라 내부복잡도가 거대해질 수 있다.

<br>

## 상태와 행동을 지닌 객체

위에서 객체는 책임과 동시에 자율성이 동반된다고 했다. 따라서 객체는 스스로 관리하고 외부에서 간섭할수 없도록 차단해야한다. 객체의 외부에서는 접근이 허락된 수단을 통해서만 객체와 의사소통해야 한다. 즉 외부에서 알 수 있는 정보는 What일 뿐, How를 알 수 없어야 한다.

~~~java
// 객체지향의 주요개념중 하나인 캡슐화를 설명할 수 있는 VO 예제코드
public class Person {
    private int age;
    private String name;
    
    public int getAge(){
        return age;
    }
    public void setAge(int age){
        this.age = age;
    }
    
    public String getName(){
        return name;
    }
    public void setString(String name){
        this.name = name;
    }
}
~~~

객체간 협력을 하기위해서는 서로 메시지를 송수신 해야한다. 메시지를 송신 또는 수신하는 행동을 통해 객체의 상태가 변하기도 한다.  그래서 객체를 상태(state)와 행동(behavior)을 함께 지닌 실체라고 한다. 

~~~java
public Person definePerson(Person person){
    person.setAge(29);
    person.setName("devandy");
    
    return person;
}
~~~

`definePerson()`의 책임은 person이라는 객체에 나이와 이름을 대입하며 반환만 하면된다. 그 안의 로직은 알 필요가 없다. 

이런 책임과 자율을 설명하는 객체지향 주요 개념이 캡슐화이다. 이 캡슐화를 잘하기 위해서 객체의 역할과 책임에 따라 적절히 메서드(방법)을 분리하는 것이 객체지향적인 프로그래밍이다.

<br>

## 결론

- 객체지향이란 시스템을 상호작용하는 자율적인 객체들의 협력을 이용하여 시스템을 분할하는 방법이다.

- **자율적인 객체**란, **<u>상태와 행위를 함께 지니며 스스로 자기 자신을 책임지는 객체</u>**를 의미한다.

- 객체는 시스템의 행위를 구현하기 위해 다른 객체와 협력하며 각 **객체는 협력 내에서 정해진 역할을 수행**하며, **역할은 서로 연관된 책임의 집합**이다.
- 객체지향은 단지 클래스를 분할하는 것이 객체지향이 아니다. **메세지를 주고받는 과정에서 역할과 책임을 어떻게 분리할지가 객체지향의 중요 핵심**이 될 수 있다.

